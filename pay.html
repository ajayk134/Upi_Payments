<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Pay â€” ADP | Always Deliver Pass</title>
<style>
  :root{
    --card-bg:#fff;
    --page-bg:#f2f3f5;
    --muted:#7a7a7a;
    --accent:#25D366;
  }
  html,body{height:100%;margin:0;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,"Helvetica Neue",Arial;}
  body{background:var(--page-bg);display:flex;align-items:flex-start;justify-content:center;padding:22px 12px;}
  .wrap{width:100%;max-width:440px;}
  .card{
    background:var(--card-bg);
    border-radius:20px;
    padding:20px;
    box-shadow:0 16px 36px rgba(10,10,20,.08);
    text-align:center;
    position:relative;
  }
  img.qr{width:260px;height:260px;border-radius:10px;object-fit:contain;display:block;margin:0 auto 12px;}
  .label{color:var(--muted);font-size:14px}
  .upi-id{font-weight:700;margin-top:6px;font-size:16px}
  .amount-label{color:var(--muted);margin-top:14px;font-size:14px}
  .amount{font-size:36px;font-weight:800;margin-top:6px}
  .apps{display:flex;gap:10px;justify-content:space-between;margin-top:18px;padding:0 6px;}
  .app-btn{width:64px;height:64px;border-radius:8px;background:#fff;border:1px solid #eee;display:flex;align-items:center;justify-content:center;cursor:pointer;box-shadow:0 6px 18px rgba(0,0,0,.04);user-select:none;}
  .app-btn:active{transform:translateY(1px)}
  .app-img{width:44px;height:44px;display:block}
  .wa-btn{display:block;margin:18px auto 6px;padding:12px 14px;background:var(--accent);color:#fff;border-radius:12px;text-decoration:none;font-weight:700;max-width:360px;box-shadow:0 8px 20px rgba(37,211,102,.18);}
  .wa-btn:active{transform:translateY(1px)}
  .footer{margin-top:14px;text-align:center;font-weight:700;color:#111}
  /* ensure no overlap and icons clickable */
  .card, .apps, .wa-btn {position:relative; z-index:1;}
</style>
</head>
<body>
  <div class="wrap">
    <div class="card" id="card">
      <img id="qr" class="qr" alt="QR code" src="" />
      <div class="label">You are paying</div>
      <div id="pa" class="upi-id">â€”</div>

      <div class="amount-label">Amount</div>
      <div id="am" class="amount">â‚¹ 0</div>

      <div class="apps" id="apps">
        <!-- Buttons will be created by JS with embedded SVG icons -->
      </div>

      <a id="wa" class="wa-btn" target="_blank" rel="noopener noreferrer">ðŸ’¬ Paid? Confirm on WhatsApp</a>
    </div>

    <div class="footer">ADP | Always Deliver Pass</div>
  </div>

<script>
/* --- read params --- */
const params = new URLSearchParams(location.search);
const pa = params.get('pa') || '';
const am = params.get('am') || '0';
const tn = params.get('tn') || '';

const upiLink = `upi://pay?pa=${encodeURIComponent(pa)}&am=${encodeURIComponent(am)}&tn=${encodeURIComponent(tn)}&cu=INR`;

/* set UI */
document.getElementById('pa').textContent = pa || 'â€”';
document.getElementById('am').textContent = 'â‚¹ ' + am;
document.getElementById('qr').src = 'https://api.qrserver.com/v1/create-qr-code/?size=400x400&data=' + encodeURIComponent(upiLink);

/* WhatsApp link (open chat with your number) */
const wa = document.getElementById('wa');
wa.href = 'https://wa.me/916301313335?text=' + encodeURIComponent(`Hi, I have completed the payment of â‚¹${am} to ${pa}`);

/* Inline SVG icons as data URLs (guaranteed to load) */
const icons = [
  {
    name: 'Google Pay',
    svg: `data:image/svg+xml;utf8,${encodeURIComponent(
`<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 120 120'>
  <rect rx='12' width='120' height='120' fill='#fff'/>
  <g transform='translate(8,12)'>
    <rect width='40' height='96' rx='8' fill='#000' />
    <text x='52' y='38' font-family='sans-serif' font-size='20' fill='#5f6368'>G</text>
    <text x='52' y='74' font-family='sans-serif' font-size='20' fill='#4285F4'>Pay</text>
  </g>
</svg>`)}`
  },
  {
    name: 'PhonePe',
    svg: `data:image/svg+xml;utf8,${encodeURIComponent(
`<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 120 120'>
  <rect rx='12' width='120' height='120' fill='#4b0082'/>
  <text x='60' y='68' font-family='sans-serif' font-size='26' fill='#fff' text-anchor='middle'>PhonePe</text>
</svg>`)}`
  },
  {
    name: 'Paytm',
    svg: `data:image/svg+xml;utf8,${encodeURIComponent(
`<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 120 120'>
  <rect rx='12' width='120' height='120' fill='#0033a0'/>
  <text x='60' y='68' font-family='sans-serif' font-size='26' fill='#fff' text-anchor='middle'>Paytm</text>
</svg>`)}`
  },
  {
    name: 'BHIM',
    svg: `data:image/svg+xml;utf8,${encodeURIComponent(
`<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 120 120'>
  <rect rx='12' width='120' height='120' fill='#00a65a'/>
  <text x='60' y='68' font-family='sans-serif' font-size='26' fill='#fff' text-anchor='middle'>BHIM</text>
</svg>`)}`
  }
];

/* build app buttons and attach handlers */
const appsContainer = document.getElementById('apps');

icons.forEach((it, idx) => {
  const btn = document.createElement('button');
  btn.type = 'button';
  btn.className = 'app-btn';
  btn.setAttribute('aria-label', it.name);
  // stop propagation so WA button doesn't get this click
  btn.addEventListener('click', function(evt){
    evt.stopPropagation();
    evt.preventDefault();
    // Try opening UPI link
    // Use location.assign because some browsers need it
    location.assign(upiLink);
    // as fallback: also open intent for Android (no harm)
    setTimeout(() => {
      // Android Intent fallback â€” wonâ€™t harm iOS/devices that ignore it
      const intent = `intent://pay?pa=${encodeURIComponent(pa)}&am=${encodeURIComponent(am)}&tn=${encodeURIComponent(tn)}#Intent;scheme=upi;package=;end`;
      // Only attempt fallback after small delay
      // window.location = intent; // commented out to avoid aggressive fallback â€” remove if you need
    }, 600);
  }, {passive:false});

  // image
  const img = document.createElement('img');
  img.className = 'app-img';
  img.src = it.svg;
  img.alt = it.name;

  btn.appendChild(img);
  appsContainer.appendChild(btn);
});

/* ensure WA button won't capture app clicks by mistake */
wa.addEventListener('click', function(e){
  // allow normal WA behaviour, but prevent propagation
  e.stopPropagation();
});
</script>
</body>
</html>
