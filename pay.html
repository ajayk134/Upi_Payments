<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Pay â€” ADP | Always Deliver Pass</title>
<style>
  :root{
    --card-bg:#fff;
    --page-bg:#f2f3f5;
    --muted:#7a7a7a;
    --accent:#25D366;
  }
  *{box-sizing:border-box}
  html,body{height:100%;margin:0;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,"Helvetica Neue",Arial;}
  body{background:var(--page-bg);display:flex;align-items:flex-start;justify-content:center;padding:22px 12px;}
  .wrap{width:100%;max-width:440px;}
  .card{
    background:var(--card-bg);
    border-radius:20px;
    padding:22px;
    box-shadow:0 20px 40px rgba(10,10,20,.08);
    text-align:center;
  }
  img.qr{width:260px;height:260px;border-radius:12px;object-fit:contain;display:block;margin:0 auto 14px;}
  .label{color:var(--muted);font-size:14px}
  .upi-id{font-weight:700;margin-top:6px;font-size:16px}
  .amount-label{color:var(--muted);margin-top:14px;font-size:14px}
  .amount{font-size:36px;font-weight:800;margin-top:6px}
  /* icons row */
  .apps-row{display:flex;gap:12px;justify-content:space-between;margin-top:18px;padding:0 6px;z-index:20;position:relative;}
  .app-link{
    width:72px;height:72px;border-radius:12px;background:#fff;border:1px solid #f0f0f0;display:inline-flex;align-items:center;justify-content:center;
    box-shadow:0 8px 18px rgba(0,0,0,.05);text-decoration:none;color:inherit;
    -webkit-tap-highlight-color: transparent;
  }
  .app-svg{width:48px;height:48px;display:block}
  .app-label{font-size:12px;margin-top:6px;color:var(--muted)}
  /* big WhatsApp CTA below icons (separated) */
  .wa-wrap{margin-top:18px}
  .wa-btn{display:block;margin:0 auto;padding:13px 18px;background:var(--accent);color:#fff;border-radius:14px;text-decoration:none;font-weight:800;max-width:380px;box-shadow:0 12px 28px rgba(37,211,102,.18);}
  .wa-btn:active{transform:translateY(1px)}
  .footer{margin-top:20px;text-align:center;font-weight:700;color:#111}
  /* ensure icons clickable on top */
  .card,.apps-row,.app-link{position:relative}
</style>
</head>
<body>
  <div class="wrap">
    <div class="card" id="card">
      <img id="qr" class="qr" alt="QR code" src="" />
      <div class="label">You are paying</div>
      <div id="pa" class="upi-id">â€”</div>

      <div class="amount-label">Amount</div>
      <div id="am" class="amount">â‚¹ 0</div>

      <!-- ICONS -->
      <div class="apps-row" id="appsRow" aria-hidden="false">
        <!-- Links inserted by JS -->
      </div>

      <!-- WhatsApp CTA (separate, below icons) -->
      <div class="wa-wrap">
        <a id="wa" class="wa-btn" target="_blank" rel="noopener noreferrer">ðŸ’¬ Paid? Confirm on WhatsApp</a>
      </div>
    </div>

    <div class="footer">ADP | Always Deliver Pass</div>
  </div>

<script>
/* read params */
const params = new URLSearchParams(location.search);
const pa = params.get('pa') || '';
const am = params.get('am') || '0';
const tn = params.get('tn') || '';

/* build UPI deep link */
const upiLink = `upi://pay?pa=${encodeURIComponent(pa)}&am=${encodeURIComponent(am)}&tn=${encodeURIComponent(tn)}&cu=INR`;

/* populate UI */
document.getElementById('pa').textContent = pa || 'â€”';
document.getElementById('am').textContent = 'â‚¹ ' + am;
document.getElementById('qr').src = 'https://api.qrserver.com/v1/create-qr-code/?size=400x400&data=' + encodeURIComponent(upiLink);

/* WhatsApp link */
const wa = document.getElementById('wa');
wa.href = 'https://wa.me/916301313335?text=' + encodeURIComponent(`Hi, I have completed the payment of â‚¹${am} to ${pa}`);

/* Inline brand-like SVGs (simple, guaranteed to load) */
const appIcons = [
  { name: 'Google Pay', svg: `<svg class="app-svg" viewBox="0 0 48 48" xmlns="http://www.w3.org/2000/svg"><rect rx="6" width="48" height="48" fill="#fff"/><g transform="translate(4,6)"><rect rx="4" width="12" height="36" fill="#000"/><text x="18" y="22" font-family="sans-serif" font-size="10" fill="#5f6368">G</text><text x="18" y="32" font-family="sans-serif" font-size="8" fill="#4285F4">Pay</text></g></svg>`},
  { name: 'PhonePe', svg: `<svg class="app-svg" viewBox="0 0 48 48" xmlns="http://www.w3.org/2000/svg"><rect rx="6" width="48" height="48" fill="#6f2ca8"/><text x="24" y="30" font-family="sans-serif" font-size="10" fill="#fff" text-anchor="middle">PhonePe</text></svg>`},
  { name: 'Paytm', svg: `<svg class="app-svg" viewBox="0 0 48 48" xmlns="http://www.w3.org/2000/svg"><rect rx="6" width="48" height="48" fill="#0033a0"/><text x="24" y="30" font-family="sans-serif" font-size="10" fill="#fff" text-anchor="middle">Paytm</text></svg>`},
  { name: 'BHIM', svg: `<svg class="app-svg" viewBox="0 0 48 48" xmlns="http://www.w3.org/2000/svg"><rect rx="6" width="48" height="48" fill="#00a65a"/><text x="24" y="30" font-family="sans-serif" font-size="10" fill="#fff" text-anchor="middle">BHIM</text></svg>`}
];

/* create anchors for each app; set href to UPI link; stop propagation so WA won't intercept */
const appsRow = document.getElementById('appsRow');

appIcons.forEach(item => {
  const a = document.createElement('a');
  a.className = 'app-link';
  a.href = upiLink;                // primary deep link
  a.target = '_self';             // open in same window (helps mobile open app)
  a.title = item.name;
  a.rel = 'noopener noreferrer';

  // Prevent parent click propagation
  a.addEventListener('click', function(e){
    e.stopPropagation(); // important: prevents other handlers from firing
    // mobile deep link: first try location.assign (some browsers prefer)
    // Setting href + target=_self is usually enough; we also call assign for robustness
    try { location.assign(upiLink); } catch(err){}
    // small fallback: setTimeout to allow app open on some devices
    setTimeout(()=>{ /* nothing */ }, 400);
  }, {passive:false});

  // insert the inline svg
  a.innerHTML = item.svg;
  appsRow.appendChild(a);
});

/* Prevent card-level or document-level handlers from hijacking clicks (safety) */
document.getElementById('card').addEventListener('click', function(e){
  // If user clicked outside icons, do nothing (prevents accidental overrides)
  // This handler intentionally does not redirect to WhatsApp.
  e.stopPropagation();
}, {passive:true});

document.addEventListener('click', function(){}, {passive:true});
</script>
</body>
</html>
